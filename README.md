# Code2Chart - Automated MermaidJS Diagram Generator via OpenAI

[![MIT License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

Code2Chart is a tool that leverages AI to analyze your codebase and generate [MermaidJS](https://mermaid-js.github.io/) diagrams automatically. It is designed to help developers visualize project structure, dependencies, and relationships with minimal manual effort. Never let your module diagrams grow stale again!

## Features

- **Automated Codebase Analysis:** Uses AI to summarize and infer relationships between files.
- **MermaidJS Output:** Generates ready-to-use Mermaid diagrams for documentation.
- **CLI Tool:** Simple command-line interface for easy integration into workflows.
- **Append or Overwrite:** Choose to append diagrams to existing markdown files or create new ones.
- **Customizable:** Easily extend or adapt for different project structures.

## Getting Started

1. **Clone the repository:**

```bash
git clone https://github.com/yourusername/code2chart.git
cd code2chart
```

2. **Install dependencies:**

```bash
pip install -r requirements.txt
```

3. **Set up your API key:**

- Ensure you have an OpenAI API key set in your environment variables.

4. **Run the generator:**

```bash
python main.py <input_directory> --output README.md
```

- Use `--append` if you want to append to an existing file.

## Example

See [`samples/nextjs_mermaid_example.md`](samples/nextjs_mermaid_example.md) for a sample output.

## License

This project is licensed under the MIT License. Do whatever you want with it!

## Acknowledgements

- Inspired by [MermaidJS](https://mermaid-js.github.io/).
- Example SaaS starter code sample from [Vercel's Next.js SaaS Starter](https://github.com/vercel/nextjs-saas-starter) (MIT License).
- Uses [OpenAI](https://platform.openai.com/) for code summarization and relationship inference.

## Contributing

Contributions are welcome! Please open issues or submit pull requests to help improve this project.

---

## MermaidJS Diagram - Generated by [Code2Chart](https://github.com/scmgustafson/code2chart/tree/main)
```mermaid
%%{init: {"theme":"forest"}}%%
graph LR
  subgraph "Root Files"
    cfg[config.py]
    mn[main.py]
    pi[pytest.ini]
  end

  subgraph "utilities"
    fu[utilities/file_utils.py]
    au[utilities/auth.py]
    ai[utilities/ai_requests.py]
  end

  subgraph "prompts"
    pt[prompts/templates.py]
  end

  subgraph "tests"
    ti1[tests/test_ai_requests.py]
    ti2[tests/test_main.py]
    ti3[tests/test_auth.py]
    ti4[tests/test_file_utils.py]
    ti5[tests/test_templates.py]
  end

  subgraph "Technologies"
    py[Python3.x]
    arg[argparse]
    log[logging]
    req[requests]
    tik[tiktoken]
    pytest_node[pytest]
    mer[MermaidJS]
  end

  env[(Env vars / credentials.py)]

  %% Relationships
  mn -->|uses settings & retry rules| cfg
  mn -->|calls check_for_api_key| au
  mn -->|calls get_file_data_map & write_mermaid_to_file| fu
  mn -->|uses chunk_by_tokens, determine_relationships, output_mermaid| ai
  mn -->|imports argparse,logging,os| arg
  mn -->|configures logging| log

  fu -->|uses IGNORE_PATTERNS & regexes| cfg
  fu -->|validates syntax| cfg

  ai -->|uses OPENAI_MODEL,ENDPOINT,MAX_TOKENS,retries| cfg
  ai -->|wraps prompts| pt
  ai -->|validates syntax via is_mermaid_syntax| fu
  ai -->|uses requests & tiktoken| req
  ai -->|uses requests & tiktoken| tik

  au -->|loads OPENAI_API_KEY| env

  pi -->|configures pytest| pytest_node

  ti1 -->|tests ai_requests logic| ai
  ti2 -->|tests main workflow & append logic| mn
  ti3 -->|tests auth API key handling| au
  ti4 -->|tests file_utils & syntax validation| fu
  ti4 -->|tests config usage| cfg
  ti5 -->|tests prompt templates| pt

  %% Technology usage
  py --- mn
  py --- fu
  py --- ai
  py --- au
  py --- pt
  py --- ti1
  py --- ti2
  py --- ti3
  py --- ti4
  py --- ti5

  mer ---|output format| ai
  mer ---|output format| mn

  %% Styling
  classDef file fill:#d5f5e3,stroke:#333,color:#333
  class cfg,mn,pi,fu,au,ai,pt,ti1,ti2,ti3,ti4,ti5 file

  classDef tech fill:#fef5e7,stroke:#333,color:#333
  class py,arg,log,req,tik,pytest_node,mer tech

  class env fill:#f9e79f,stroke:#333,color:#333
```
<!-- END AUTOMATED MERMAID -->
